<html>
    <body>
        <div class="tabContainer">
            <div id="tab1">
                <h3 id="Sh">Small Hut</h3>
                <button id="firebtn">Stoke Fire</button>
            <h4 id="firetext">Fire Health: -</h3>
            </div>
            <div id="tab2">
                <h3 id="Df">Dark Forest</h3>
                <button id="woodbtn">Collect Wood</button>
          <h3 id="woodtext">You have - wood.</h3>
            </div>
            <div id="tab3">
                <h3 id="Bs">Building Station</h3>
                <h4 id="populationtext">Population: -</h3>
                    <h4 id="maxpopulationtext">Max Population: -</h3>
                    <h4 id="huttext">Huts: -</h3>
                    <button id="hutbtn">Build Hut (50 Wood)</button>
                    <h5>Lumberjack</h5>
                    <button id="hirebtn">Hire</button>
                    <button id="firebtn">Fire</button>
            </div>
        </div>
        <button id="tabButton1" class="tabButton">Small Hut (-)</button>
        <button id="tabButton2" class="tabButton">Dark Forest</button>
        <button id="tabButton3" class="tabButton">Building Station</button>

        <script>
            // Fire
            var firehealth = 100
                    firetext = document.getElementById("firetext")
                    firebtn = document.getElementById("firebtn")
        
                    firetext.style.textAlign = 'center'
                    firetext.innerHTML = "Fire Health: " + firehealth
                    document.getElementById("tabButton1").innerHTML = "Small Hut (" + firehealth + ")"
        
                    firebtn.addEventListener("click", function() {
                        onClick("fire")
                    })
        
                    function drainFireHealth() {
                        firehealth -= 5
                        firetext.innerHTML = "Fire Health: " + firehealth
                        document.getElementById("tabButton1").innerHTML = "Small Hut (" + firehealth + ")"
                        if (firehealth <= 0) {
                            document.body.style.backgroundColor = "red"
                            sleep(500).then(() => {
                                if (confirm("You Died.\nRestarting.")) {
                                    location.reload()
                                } else {
                                    location.reload()
                                }
                            })
                        }
                    }
            // Wood
            var wood = 0
              woodtext = document.getElementById("woodtext")
              woodbtn = document.getElementById("woodbtn")
  
              woodtext.innerHTML = "You have " + wood + " wood."
              woodtext.style.textAlign = 'center'
  
              woodbtn.addEventListener("click", function() {
                  onClick("wood")
              })
            // Building Station
            var population = 0
                      var maxpopulation = 0
                      var huts = 0
                      populationtext = document.getElementById("populationtext")
                      maxpopulationtext = document.getElementById("maxpopulationtext")
                      huttext = document.getElementById("huttext")
                      hutbtn = document.getElementById("hutbtn")
            
                      populationtext.innerHTML = "Population: " + population
                      maxpopulationtext.innerHTML = "Max Population: " + maxpopulation
                      huttext.innerHTML = "Huts: " + huts
            
                      hutbtn.addEventListener("click", function() {
                        onClick("hut")
                      })
            // Button Clicks
            function onClick(btn) {
                if (btn == "wood") {
                    wood += 4
                    woodtext.innerHTML = "You have " + wood + " wood."
                    woodbtn.disabled = true
                    sleep(3000).then(() => { woodbtn.disabled = false })
                } else if (btn == "fire" && wood >= 2 && firehealth < 100) {
                    firehealth += 15
                    wood -= 2
                    if (firehealth > 100) {
                        firehealth = 100
                    }
                    document.getElementById("tabButton1").innerHTML = "Small Hut (" + firehealth + ")"
                    woodtext.innerHTML = "You have " + wood + " wood."
                    firetext.innerHTML = "Fire Health: " + firehealth
                    firebtn.disabled = true
                    sleep(1500).then(() => { firebtn.disabled = false })
                } else if (btn == "hut" && wood >= 50) {
                  wood -= 50
                  maxpopulation += 5
                  huts += 1
                  woodtext.innerHTML = "You have " + wood + " wood."
                  populationtext.innerHTML = "Population: " + population
                  maxpopulationtext.innerHTML = "Max Population: " + maxpopulation
                  huttext.innerHTML = "Huts: " + huts
                  hutbtn.disabled = true
                  sleep(15000).then(() => {hutbtn.disabled = false })
                }
            }
            function sleep(ms) {
                return new Promise(resolve => setTimeout(resolve, ms))
            }
            // Population
            function addpopulation() {
              if (population < maxpopulation) {
                population += 1
                populationtext.innerHTML = "Population: " + population
              } else {
                population = maxpopulation
                populationtext.innerHTML = "Population: " + population
              }
            }
  </script>

        <script>
            setInterval(addpopulation, 30000)
            setInterval(drainFireHealth, 3500)

            const tabs = [
                document.getElementById("tab1"),
                document.getElementById("tab2"),
                document.getElementById("tab3")
            ]
            const tabButtons = [
                document.getElementById("tabButton1"),
                document.getElementById("tabButton2"),
                document.getElementById("tabButton3")
            ]
            changeContent()
            tabButtons[0].addEventListener("click", function() {
                tabButtons[0].className = "tabButtonON"
                tabButtons[1].className = "tabButton"
                tabButtons[2].className = "tabButton"
                changeContent()
            })
            tabButtons[1].addEventListener("click", function() {
                tabButtons[1].className = "tabButtonON"
                tabButtons[0].className = "tabButton"
                tabButtons[2].className = "tabButton"
                changeContent()
            })
            tabButtons[2].addEventListener("click", function() {
                tabButtons[2].className = "tabButtonON"
                tabButtons[1].className = "tabButton"
                tabButtons[0].className = "tabButton"
                changeContent()
            })
            function changeContent() {
                if (tabButtons[0].className == "tabButtonON") {
                    tabs[1].hidden = true
                    tabs[0].hidden = false
                    tabs[2].hidden = true
                } else if (tabButtons[1].className == "tabButtonON") {
                    tabs[0].hidden = true
                    tabs[1].hidden = false
                    tabs[2].hidden = true
                } else if (tabButtons[2].className == "tabButtonON") {
                    tabs[0].hidden = true
                    tabs[1].hidden = true
                    tabs[2].hidden = false
                } else {
                    tabs[0].hidden = true
                    tabs[1].hidden = true
                    tabs[2].hidden = true
                }
            }
        </script>
        <link rel="stylesheet" href="styles.css">
    </body>
</html>